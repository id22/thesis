%!TEX root = New.tex

\section{Implementation}

\begin{itemize}
\item
Prototype of \shrink's implemented and deployed on a local cluster.
\item
A fraction of servers are running Squid proxy instances, and another set of servers within the same cluster are generating client traffic in the form of HTTP requests.
\item
Prototype emulate DNS load balancing done by CDNs. Clients query \shrink\ controller, which is running on a separate server, for the preferred proxy for their request. Clients then query the proxy server for the content, and log the response time of the proxy server.
\item
Squid proxy instances are configured to run as a multicast group, so that if a proxy does not have the requested content it queries other servers using the ICP protocol, and fetch content from a server that has the content.
\item
If a content is unavailable within the cluster, the proxy server fetches it from an origin server which is located external to the cluster. We configure a PlanetLab node located 50 ms away from the cluster to act as the origin server. This ensures that cache misses which require content to be fetched from origin observe a much worse performance compared to other requests.
\item
A daemon process running on each server periodically scans recent logs of content accesses generated by squid, and sends a report to \shrink\ controller. 
\item
We emulate server shutdown by killing the proxy process running on that server, and restart proxies when they are turned on by the \shrink\ controller.
\item
How do we measure energy use?  We use a power model derived in Section \ref{sec:background} from our measurements. As per the model, the total energy use of a server within  is a sum of idle energy and usage-based power. The idle power is calculated based on the duration for which the proxy is active during an experiment. The usage-based power is estimated based on number of requests served by the proxy server as seen in the access logs.
\end{itemize}

What features are not implemented?

Our current prototype implements only a subset of features included in \shrink's design.

(1) Controls for turning servers on-off.
(2) Controls for turning switches on-off, as well as implementing traffic engineering decisions among servers.

